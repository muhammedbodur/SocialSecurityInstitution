@page
@model dynamic
@{
    Layout = null;
}

@section Styles {

}
<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>İzmir Sosyal Güvenlik İl Müdürlüğü</title>
    <!-- Bootstrap 5 CSS dosyası -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" />
    <!-- Özel stil tanımları -->
    <style>
        body {
            background-color: #d2e2fcff;
        }

        .card-body {
            padding: 0.5rem 1rem;
        }

        .card-title,
        .card-text {
            font-weight: bold;
        }

        #logo {
            max-width: 200px;
        }

        .header-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 10px;
        }

        .header-title {
            font-size: 5rem;
            font-weight: bold;
            margin: 10px;
        }

        .banko-container {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 100%;
        }

        .banko-text {
            font-size: 2.5vw;
            margin-right: 1vw;
            text-align: left; /* Sola yaslama */
        }

        .banko-details {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .banko-number {
            font-size: 4vw;
        }

        .banko-floor {
            font-size: 1.5vw;
        }

        #siraContainer {
            display: flex;
            justify-content: center; /* Yatayda ortalama */
            align-items: center; /* Dikeyde ortalama */
            height: 100vh; /* Ekran yüksekliği kadar yükseklik */
            width: 90vw; /* Genişlik %90 */
        }

        #siraBankoCard, #siraNoCard {
            margin: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            flex: 1;
            min-width: 300px;
        }

        .card-header {
            background-color: #0d6dfcff;
            color: #fff;
        }

        .card-title {
            margin-bottom: 0;
        }

        #sira-numarasi, #banko-numarasi {
            font-size: 12vw;
            font-weight: bold;
            color: #0d6dfcff;
        }
    </style>
</head>
<body>
    <header class="header-container container-fluid">
        <img id="logo" src="~/img/logos/sgk_logo.svg" alt="SGK Logo" />
        <h1 class="header-title">İzmir Sosyal Güvenlik İl Müdürlüğü</h1>
    </header>
    <!-- Ana içerik alanı -->
    <main id="main" class="container-fluid py-6">
        <section class="row" id="ListeSection">
            <!-- Sol taraftaki sıra alanı -->
            <div class="col-lg-6">
                <div class="card mb-3">
                    <div class="card-body">
                        <div class="row row-cols-2 row-cols-md-2 row-cols-lg-1 g-3">
                            @for (int i = 1; i <= 5; i++)
                            {
                                <div id="group_@i" class="col group">
                                    <div>
                                        <div class="row border" style="height: auto;">
                                            <div class="col-4 bg-primary d-flex ">
                                                <div class="banko-container text-light p-1">
                                                    <div class="banko-text fw-bold">Banko</div>
                                                    <div class="banko-details">
                                                        <div id="banko_no_@i" class="banko-number fw-bold">@i</div>
                                                        <div id="banko_" class="banko-floor fw-bold">Zemin</div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-8 d-flex align-items-center justify-content-center">
                                                <div class="d-flex justify-content-center align-items-center text-primary">
                                                    <div id="banko_sira_@i" class="fw-bold" style="font-size: 5vw;">
                                                        @(i + 1904)
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            }
                        </div>
                    </div>
                </div>
            </div>

            <!-- Sağ taraftaki haber ve video alanı -->
            <div class="col-lg-6">
                <div class="card mb-3">
                    <div class="card-header bg-primary text-light d-flex justify-content-between">
                        <h3 class="m-0">DUYURU</h3>
                        <h5 class="m-0">Ek Hizmet Binası</h5>
                    </div>

                    <div class="card-body">
                        <!-- Haberler marquee ile kaydırılır -->
                        <marquee behavior="scroll" direction="left" scrollamount="2" height="60px">
                            <p class="fw-bold fs-1">Lorem Ipsum, dizgi ve baskı endüstrisinde kullanılan mıgır metinlerdir. Lorem Ipsum, adı bilinmeyen bir matbaacının bir hurufat numune kitabı oluşturmak üzere bir yazı galerisini alarak karıştırdığı 1500'lerden beri endüstri standardı sahte metinler olarak kullanılmıştır. Beşyüz yıl boyunca varlığını sürdürmekle kalmamış, aynı zamanda pek değişmeden elektronik dizgiye de sıçramıştır. 1960'larda Lorem Ipsum pasajları da içeren Letraset yapraklarının yayınlanması ile ve yakın zamanda Aldus PageMaker gibi Lorem Ipsum sürümleri içeren masaüstü yayıncılık yazılımları ile popüler olmuştur.</p>
                        </marquee>
                        <hr />
                        <!-- Video oynatıcı -->
                        <video id="myVideo" class="w-100" controls autoplay loop muted>
                            <source src="~/Video/video.mp4" type="video/mp4" />
                        </video>
                    </div>
                </div>

                <!-- Saat ve tarih alanı -->
                <div class="card mb-3">
                    <div class="card-body text-center text-primary">
                        <!-- Saat ve tarih JavaScript tarafından güncellenir -->
                        <p class="fw-bold fs-1" id="saat"></p>
                        <p class="fw-bold fs-1" id="gün"></p>
                    </div>
                </div>
            </div>
        </section>
        <section id="SiraSection">
            <div class="container" id="siraContainer">
                <div class="row w-100">
                    <div id="BankoNoDiv" class="col-md-6">
                        <div class="card" id="siraBankoCard">
                            <div class="card-header">
                                <h1 class="card-title text-center">Banko</h1>
                            </div>
                            <div class="card-body text-center">
                                <h1 class="text-center" id="banko-numarasi">1</h1>
                            </div>
                        </div>
                    </div>
                    <div id="SiraNoDiv" class="col-md-6">
                        <div class="card" id="siraNoCard">
                            <div class="card-header">
                                <h1 class="card-title text-center">Sıra No</h1>
                            </div>
                            <div class="card-body text-center">
                                <h1 class="text-center" id="sira-numarasi">1905</h1>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="script.js"></script>
    <script type="text/javascript">
        window.onload = startTime;
        function startTime() {
            var today = new Date();
            var h = today.getHours();
            var m = today.getMinutes();
            var s = today.getSeconds();
            var day = today.toLocaleDateString("tr-TR", { weekday: "long" }); // Get the day

            h = checkTime(h);
            m = checkTime(m);
            s = checkTime(s);
            document.getElementById("saat").innerHTML = h + ":" + m + ":" + s + " ";
            document.getElementById("gün").innerHTML = day;
            t = setTimeout(startTime, 1000);
        }

        function checkTime(i) {
            if (i < 10) {
                i = "0" + i;
            }
            return i;
        }

        document.addEventListener('DOMContentLoaded', function () {
            var video = document.getElementById('myVideo');
            video.play();
        });
    </script>
    <script>
        // Sayfalar arası geçişi yönetme
        let isSiraGorunumu = true;

        function toggleView() {
            const siraBankoContainer = document.getElementById('sira-banko-container');
            const listeContainer = document.getElementById('liste-container');

            if (isSiraGorunumu) {
                siraBankoContainer.classList.remove('visible');
                siraBankoContainer.classList.add('hidden');
                listeContainer.classList.remove('hidden');
                listeContainer.classList.add('visible');
            } else {
                siraBankoContainer.classList.remove('hidden');
                siraBankoContainer.classList.add('visible');
                listeContainer.classList.remove('visible');
                listeContainer.classList.add('hidden');
            }

            isSiraGorunumu = !isSiraGorunumu;
        }

        // Sayfa yüklendiğinde Sıra görünümünü göster
        window.onload = function () {
            toggleView(); // İlk görünüm olarak Sıra ve Banko Numarası gösterilir

            // SignalR bağlantısı kurma ve mesaj dinleme
            const connection = new signalR.HubConnectionBuilder().withUrl("/dashboardHub").build();

            connection.on("ReceiveSiraBilgisi", function (siraData) {
                // Sıra bilgisi alındığında Sıra ve Banko görünümüne geçiş yap
                document.getElementById('sira-numarasi').textContent = siraData.siraNumarasi;
                document.getElementById('banko-numarasi').textContent = siraData.bankoNumarasi;
                toggleView();

                // 5 saniye sonra Liste görünümüne geçiş yap
                setTimeout(toggleView, 5000);
            });

            connection.start().catch(function (err) {
                return console.error(err.toString());
            });
        };
    </script>
</body>
</html>
