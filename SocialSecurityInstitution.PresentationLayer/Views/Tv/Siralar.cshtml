@using SocialSecurityInstitution.BusinessLogicLayer.Helpers
@model SocialSecurityInstitution.PresentationLayer.Models.Tv.TvListViewModel

@{
    Layout = null;

    // Model null gelirse default değerler atanacak
    var siralarTvListe = Model.SiralarTvListe ?? new List<SiralarTvListeDto>();
    var hizmetBinasi = Model.HizmetBinasi ?? new HizmetBinalariDto
                        {
                            HizmetBinasiAdi = "Belirlenmemiş"            
                        };
    var tvler = Model.Tvler;
}

@section Styles {

}
<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>İzmir Sosyal Güvenlik İl Müdürlüğü</title>
    <!-- Bootstrap 5 CSS dosyası -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" />
    <!-- Özel stil tanımları -->
    <style>
        body {
            background-color: #d2e2fcff;
        }

        .card-body {
            padding: 0.5rem 1rem;
        }

        .card-title,
        .card-text {
            font-weight: bold;
        }

        #logo {
            max-width: 200px;
        }

        .header-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 10px;
        }

        .header-title {
            font-size: 5rem;
            font-weight: bold;
            margin: 10px;
        }

        .banko-container {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 100%;
        }

        .banko-text {
            font-size: 2.5vw;
            margin-right: 1vw;
            text-align: left; /* Sola yaslama */
        }

        .banko-details {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .banko-number {
            font-size: 4vw;
        }

        .banko-floor {
            font-size: 1.5vw;
        }

        #siraContainer {
            display: flex;
            justify-content: center; /* Yatayda ortalama */
            align-items: center; /* Dikeyde ortalama */
            height: 100vh; /* Ekran yüksekliği kadar yükseklik */
            width: 90vw; /* Genişlik %90 */
        }

        #siraBankoCard, #siraNoCard {
            margin: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            flex: 1;
            min-width: 300px;
        }

        .card-header {
            background-color: #0d6dfcff;
            color: #fff;
        }

        .card-title {
            margin-bottom: 0;
        }

        #sira-numarasi, #banko-numarasi {
            font-size: 12vw;
            font-weight: bold;
            color: #0d6dfcff;
        }
    </style>
</head>
<body>
    <header id="header" class="header-container container-fluid">
        <img id="logo" src="~/img/logos/sgk_logo.svg" alt="SGK Logo" />
        <h1 class="header-title">İzmir Sosyal Güvenlik İl Müdürlüğü</h1>
    </header>
    <audio id="dingDongSound" src="~/Sounds/dingdong.mp3" preload="auto"></audio>
    <!-- Ana içerik alanı -->
    <main id="main" class="container-fluid py-6">
        <section class="row" id="ListeSection">
            <!-- Sol taraftaki sıra alanı -->
            <div class="col-lg-6">
                <div class="card mb-3">
                    <div class="card-body">
                        <div id="siraListe" class="row row-cols-2 row-cols-md-2 row-cols-lg-1 g-3">
                            @for (int i = 0; i < 5; i++)
                            {
                                <div id="group_@i" class="col group">
                                    <div>
                                        <div class="row border" style="height: auto;">
                                            <div class="col-4 bg-primary d-flex ">
                                                <div class="banko-container text-light p-1">
                                                    <div class="banko-text fw-bold">Banko</div>
                                                    <div class="banko-details">
                                                        <div id="banko_no_@(i + 1)" class="banko-number fw-bold">
                                                            @(i < siralarTvListe.Count ? siralarTvListe[i].BankoNo.ToString() : "-")
                                                        </div>
                                                        <div id="banko_kat_@(i + 1)" class="banko-floor fw-bold">
                                                            @(i < siralarTvListe.Count ? siralarTvListe[i].KatTipiDisplayName : "-")
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-8 d-flex align-items-center justify-content-center">
                                                <div class="d-flex justify-content-center align-items-center text-primary">
                                                    <div id="banko_sira_@(i + 1)" class="fw-bold" style="font-size: 5vw;">
                                                        @(i < siralarTvListe.Count ? siralarTvListe[i].SiraNo.ToString() : "-")
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            }
                        </div>
                    </div>
                </div>
            </div>

            <!-- Sağ taraftaki haber ve video alanı -->
            <div class="col-lg-6">
                <div class="card mb-3">
                    <div class="card-header bg-primary text-light d-flex justify-content-between">
                        <h3 class="m-0">TV : @tvler.TvId</h3>
                        <h3 class="m-0">DUYURU</h3>
                        <h5 class="m-0">@hizmetBinasi.HizmetBinasiAdi</h5>
                    </div>

                    <div class="card-body">
                        <!-- Haberler marquee ile kaydırılır -->
                        <marquee behavior="scroll" direction="left" scrollamount="2" height="60px">
                            <p class="fw-bold fs-1">@tvler.Aciklama</p>
                        </marquee>
                        <hr />
                        <!-- Video oynatıcı -->
                        <video id="myVideo" class="w-100" controls autoplay loop muted>
                            <source src="~/Video/video.mp4" type="video/mp4" />
                        </video>
                    </div>
                </div>

                <!-- Saat ve tarih alanı -->
                <div class="card mb-3">
                    <div class="card-body text-center text-primary">
                        <p class="fw-bold fs-1" id="saat"></p>
                        <p class="fw-bold fs-1" id="gün"></p>
                    </div>
                </div>
            </div>
        </section>
        <section id="SiraSection" style="display:none;">
            <div class="container" id="siraContainer">
                <div class="row w-100">
                    <div id="BankoNoDiv" class="col-md-6">
                        <div class="card" id="siraBankoCard">
                            <div class="card-header">
                                <h1 class="card-title text-center">Banko</h1>
                            </div>
                            <div class="card-body text-center">
                                <h1 class="text-center" id="banko-numarasi">@((siralarTvListe.Any() && siralarTvListe.Count > 0) ? siralarTvListe[0].BankoNo.ToString() : "-")</h1>
                            </div>
                        </div>
                    </div>
                    <div id="SiraNoDiv" class="col-md-6">
                        <div class="card" id="siraNoCard">
                            <div class="card-header">
                                <h1 class="card-title text-center">Sıra No</h1>
                            </div>
                            <div class="card-body text-center">
                                <h1 class="text-center" id="sira-numarasi">@((siralarTvListe.Any() && siralarTvListe.Count > 0) ? siralarTvListe[0].SiraNo.ToString() : "-")</h1>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>
    <script src="~/vendor/libs/jquery/jquery.js"></script>
    <script src="~/vendor/libs/jquery/jquery-ui.js"></script>
    <script src="~/vendor/libs/jquery/jquery-ui.min.js"></script>
    <script src="~/vendor/libs/popper/popper.js"></script>
    <script src="~/vendor/libs/toastr/toastr.js"></script>
    <script src="~/vendor/js/bootstrap.js"></script>
    <script src="~/lib/microsoft/signalr/dist/browser/signalr.js"></script>
    <script src="~/js/SignalR/TvNotification.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"></script>
    <script type="text/javascript">
        window.onload = startTime;
        function startTime() {
            var today = new Date();
            var h = today.getHours();
            var m = today.getMinutes();
            var s = today.getSeconds();
            var day = today.toLocaleDateString("tr-TR", { weekday: "long" });

            h = checkTime(h);
            m = checkTime(m);
            s = checkTime(s);
            document.getElementById("saat").innerHTML = h + ":" + m + ":" + s + " ";
            document.getElementById("gün").innerHTML = day;
            t = setTimeout(startTime, 1000);
        }

        function checkTime(i) {
            if (i < 10) {
                i = "0" + i;
            }
            return i;
        }

        document.addEventListener('DOMContentLoaded', function () {
            var video = document.getElementById('myVideo');
            video.play();
        });
    </script>
</body>
</html>
